# shellmando configuration
# ========================
#
# Config file search order:
#   1. --config CLI argument
#   2. SHELLMANDO_CONFIG environment variable
#   3. $XDG_CONFIG_HOME/shellmando/config.toml  (default: ~/.config)
#   4. <script_dir>/shellmando.toml  (next to shellmando.py)
#
# Precedence (highest wins): CLI flags > environment variables > config file > defaults
#
# Prompt templates support these variables (replaced at runtime):
#   {mode}           - current mode (bash, zsh, python, â€¦)
#   {os}             - detected or configured OS description
#   {python_version} - Python version, e.g. "3.12"

# -- LLM connection --------------------------------------------------------

[llm]
host = "http://localhost:8280"
starter = " ~/.local/lib/shellmando/shellmando_start_llm.sh"
model = "default"

# -- Generation defaults ----------------------------------------------------

[generation]
mode = "bash"                  # bash | sh | zsh | fish | python
temperature = 0.1
os = ""                        # leave empty to auto-detect

# -- Network / resilience ---------------------------------------------------

[network]
timeout = 180                  # HTTP timeout per request (seconds)
startup_timeout = 50           # max seconds to wait for LLM startup
retries = 30                   # max retry attempts
retry_delay = 1.0              # seconds between retries

# -- Output -----------------------------------------------------------------

[output]
dir = "~/.local/share/shellmando"

# -- Prompt templates -------------------------------------------------------
#
# Each mode section can define:
#   system  - the system prompt sent to the LLM
#
# All three fields support the template variables listed above.
# If a section is missing the built-in defaults are used.

[prompts.shell]
system = """\
You are a {mode} expert on {os}. \
Reply ONLY with the needed command(s), NO explanation. \
Use variables only if necessary."""

[prompts.python]
system = """\
Reply ONLY with Python (>= {python_version}) code. \
NO explanation, no prose. Don't repeat yourself: use functions. \
Style: use comprehension instead of loops, modern type hints, error checks. \
Prefer nice print output."""
